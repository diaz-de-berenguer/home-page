<script>
	// Game!
	document.addEventListener("turbolinks:load", function() {
		$(this).keyup(function(e) {
			if (e.keyCode == 32 && $("#canvas").length < 1) {
				start();
			};

			if (e.keyCode == 27 && $("#canvas").length >= 1) {
				closeGame();
			};
		})

		$(".space-bar").on("click", start);
	});

	// Set a variable for the ".info" div
	let infoDiv        = $(".pending-container .info");
	let infoContentDiv = $(".pending-container .info-content");

	// Start -- occurs when user presses the space key, or click 'space-bar'
	let start = () => {
		// Add active class, a canvas element, and a way to close the game
		infoDiv.addClass("active");
		infoDiv.prepend('<div class="close-game"><%= fa_icon "times-circle" %></div><div id="canvas"></div>')
		infoContentDiv.fadeOut(10);

		// Initialize the game
		initializeGame();

		// Set function for closing the game
		$(".close-game").on("click", closeGame);
	}

	// Closes the game -- occurs when user presses the (x) button or the escape key
	let closeGame = () => {
		infoDiv.removeClass("active");
		$(".close-game").remove();
		$("#canvas").remove();
		infoContentDiv.fadeIn();
	}

	let initializeGame = () => {
		console.log('initialize Game!');
	}

</script>
